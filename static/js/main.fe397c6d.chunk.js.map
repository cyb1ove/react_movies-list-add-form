{"version":3,"sources":["components/MovieCard/MovieCard.tsx","components/MoviesList/MoviesList.tsx","components/NewMovie/FormField/FormField.tsx","components/NewMovie/NewMovie.tsx","App.tsx","index.tsx"],"names":["MovieCard","title","description","imgUrl","imdbUrl","className","src","alt","href","MoviesList","movies","map","movie","imdbId","FormField","field","fieldProps","hasFieldError","name","type","htmlFor","NewMovie","initialMovie","initialErrors","state","errors","hasErrors","Object","values","some","value","isAllCompleted","every","text","length","changeHandler","e","target","keys","includes","checkError","setState","prevState","sumbitHandler","preventDefault","onAdd","props","tempError","match","getFieldProps","extraClass","classes","classNames","class","placeholder","onChange","onSubmit","this","disabled","Component","App","moviesFromServer","addMovie","React","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fe397c6d.chunk.js","sourcesContent":["import React from 'react';\nimport './MovieCard.scss';\n\ntype Props = Movie;\n\nexport const MovieCard: React.FC<Props> = ({\n  title, description, imgUrl, imdbUrl,\n}) => (\n  <div className=\"card\">\n    <div className=\"card-image\">\n      <figure className=\"image is-4by3\">\n        <img\n          src={imgUrl}\n          alt=\"Film logo\"\n        />\n      </figure>\n    </div>\n    <div className=\"card-content\">\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <figure className=\"image is-48x48\">\n            <img\n              src=\"images/imdb-logo.jpeg\"\n              alt=\"imdb\"\n            />\n          </figure>\n        </div>\n        <div className=\"media-content\">\n          <p className=\"title is-8\">{title}</p>\n        </div>\n      </div>\n\n      <div className=\"content\">\n        {description}\n        <br />\n        <a href={imdbUrl}>IMDB</a>\n      </div>\n    </div>\n  </div>\n);\n","import React from 'react';\n\nimport './MoviesList.scss';\nimport { MovieCard } from '../MovieCard';\n\ninterface Props {\n  movies: Movie[];\n}\n\nexport const MoviesList: React.FC<Props> = ({ movies }) => (\n  <div className=\"movies\">\n    {movies.map(movie => (\n      <MovieCard key={movie.imdbId} {...movie} />\n    ))}\n  </div>\n);\n","import { HtmlPropsForMovieForm } from '../../../types/types';\n\ntype Props = {\n  fieldProps: (extraClass?: string) => HtmlPropsForMovieForm;\n  hasFieldError: boolean;\n};\n\nexport const FormField: React.FC<Props> = ({ fieldProps, hasFieldError }) => {\n  const { name } = fieldProps();\n  let field;\n\n  switch (name) {\n    case 'description':\n      field = <textarea {...fieldProps('form__field--textarea')} />;\n      break;\n    default:\n      field = <input {...fieldProps()} type=\"text\" />;\n      break;\n  }\n\n  return (\n    <label className=\"form__item\" htmlFor={name}>\n      <span className=\"form__title\">{name}</span>\n\n      {field}\n\n      {hasFieldError && (\n        <span className=\"form__warning\">Incorrect URL</span>\n      )}\n    </label>\n  );\n};\n","import { Component } from 'react';\nimport classNames from 'classnames';\nimport {\n  Movie, ChangesEvent, SubmitEvent, HtmlPropsForMovieForm,\n} from '../../types/types';\nimport './NewMovie.scss';\nimport { FormField } from './FormField/FormField';\n\ntype MovieErrors = RequireAtLeastOne<FormFieldErrors<Movie>, 'imgUrl' | 'imdbUrl'>;\n\ntype Props = {\n  onAdd: (movie: Movie) => void;\n};\n\ntype State = {\n  movie: Movie;\n  errors: MovieErrors;\n};\n\nexport class NewMovie extends Component<Props, State> {\n  initialMovie: Movie = {\n    title: '',\n    description: '',\n    imgUrl: '',\n    imdbUrl: '',\n    imdbId: '',\n  };\n\n  initialErrors: MovieErrors = {\n    imgUrl: false,\n    imdbUrl: false,\n  };\n\n  state: State = {\n    movie: { ...this.initialMovie },\n    errors: { ...this.initialErrors },\n  };\n\n  hasErrors = (): boolean => {\n    return Object.values(this.state.errors).some(value => value);\n  };\n\n  isAllCompleted = (): boolean => {\n    return Object.values(this.state.movie).every(text => text.length);\n  };\n\n  changeHandler = (e: ChangesEvent): void => {\n    const { name, value } = e.target;\n\n    if (Object.keys(this.state.errors).includes(name)) {\n      this.checkError(name, value);\n    }\n\n    this.setState((prevState) => {\n      return {\n        movie: {\n          ...prevState.movie,\n          [name]: value,\n        },\n      };\n    });\n  };\n\n  sumbitHandler = (e: SubmitEvent): void => {\n    e.preventDefault();\n    const { onAdd } = this.props;\n\n    onAdd(this.state.movie);\n\n    this.setState({\n      movie: { ...this.initialMovie },\n    });\n  };\n\n  checkError = (name: string, value: string) => {\n    const sitePattern = /^((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=+$,\\w]+@)?[A-Za-z0-9.-]+|(?:www\\.|[-;:&=+$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[+~%/.\\w-_]*)?\\??(?:[-+=&;%@.\\w_]*)#?(?:[.!/\\\\\\w]*))?)$/;\n    const tempError: boolean = value.length ? !value.match(sitePattern) : false;\n\n    this.setState((prevState) => {\n      return {\n        errors: {\n          ...prevState.errors,\n          [name]: tempError,\n        },\n      };\n    });\n  };\n\n  getFieldProps = (\n    field: keyof Movie,\n  ) => {\n    return (extraClass?: string): HtmlPropsForMovieForm => {\n      const classes = classNames(\n        extraClass,\n        'form__field',\n        { 'form__field--invalid': this.state.errors[field] },\n      );\n\n      return {\n        name: field,\n        class: classes,\n        value: this.state.movie[field],\n        placeholder: `Please, enter ${field}`,\n        onChange: this.changeHandler,\n      };\n    };\n  };\n\n  render() {\n    return (\n      <form\n        className=\"form\"\n        onSubmit={this.sumbitHandler}\n      >\n        {\n          (Object.keys(this.state.movie) as Array<keyof Movie>).map((field) => {\n            const fieldProps = this.getFieldProps(field);\n\n            return (\n              <FormField\n                fieldProps={fieldProps}\n                hasFieldError={this.state.errors[field] || false}\n              />\n            );\n          })\n        }\n\n        <button\n          className=\"form__submit\"\n          disabled={this.hasErrors() || !this.isAllCompleted()}\n          type=\"submit\"\n        >\n          Add movie\n        </button>\n      </form>\n    );\n  }\n}\n","import React from 'react';\nimport './App.scss';\nimport { MoviesList } from './components/MoviesList';\nimport { NewMovie } from './components/NewMovie';\nimport moviesFromServer from './api/movies.json';\n\ninterface State {\n  movies: Movie[];\n}\n\nexport class App extends React.Component<{}, State> {\n  state: State = {\n    movies: moviesFromServer,\n  };\n\n  addMovie = (movie: Movie) => {\n    this.setState((prevState) => {\n      return {\n        movies: [\n          ...prevState.movies,\n          movie,\n        ],\n      };\n    });\n  };\n\n  render() {\n    const { movies } = this.state;\n\n    return (\n      <div className=\"page\">\n        <div className=\"page-content\">\n          <MoviesList movies={movies} />\n        </div>\n        <div className=\"sidebar\">\n          <NewMovie onAdd={this.addMovie} />\n        </div>\n      </div>\n    );\n  }\n}\n","import ReactDOM from 'react-dom';\nimport 'bulma/css/bulma.css';\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}